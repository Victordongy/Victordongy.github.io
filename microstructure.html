
<!DOCTYPE HTML>
<!--
	Dopetrope 2.0 by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
			<title>Victor's Blog</title>
			<meta http-equiv="content-type" content="text/html; charset=utf-8" />
			<meta charset="utf-8" />
			<link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Victor's Blog Full Atom Feed" />
			<link href="/feeds/posts.atom.xml" type="application/atom+xml" rel="alternate" title="Victor's Blog Categories Atom Feed" />
			<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,900,300italic" rel="stylesheet" />
				<link rel="stylesheet" href="/theme/css/pygment.css" />
			<noscript>
				<link rel="stylesheet" href="/theme/css/skel-noscript.css" />
				<link rel="stylesheet" href="/theme/css/style.css" />
				<link rel="stylesheet" href="/theme/css/style-desktop.css" />
			</noscript>
	</head>
	<body class="no-sidebar">
		<!-- Header Wrapper -->
			<div id="header-wrapper">
				<div class="container">
					<div class="row">
						<div class="12u">
						
							<!-- Header -->
								<section id="header">
									
									<!-- Logo -->
									<h1><a href="/">Victor's Blog</a></h1>
									
									<!-- Nav -->
										<nav id="nav">
											<ul>
														<li><a href="/pages/Third-Post.html">CV</a></li>
											</ul>
										</nav>

								</section>

						</div>
					</div>
				</div>
			</div>
		
		<!-- Main Wrapper -->
			<div id="main-wrapper">
				<div class="container">
<div class="row">
	<div class="12u">
			<section>
				<div>
					<div class="row">
						<div class="12u skel-cell-mainContent">
							<!-- Content -->
								<article class="box is-post">
									<div class="post-infos">
										<ul class="tags">
											<li><a class="button" href="category/posts.html">Posts</a></li>
												<li><a class="button button-alt" href="tag/microstructure.html">Microstructure</a></li>

										</ul>
									</div>

									<div class="pennant pennant-alt date">2017-11-30</div>
									<h2>SFGK model</h2>
									<style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-SFGK-zero-intelligence-model">The SFGK zero-intelligence model<a class="anchor-link" href="#The-SFGK-zero-intelligence-model">¶</a></h2><p>In this model due to Smith, Farmer, Gillemot and Krishnamurthy:</p>
<ul>
<li><p>Limit orders can be placed at any integer price level $p$ where $-\infty < p < \infty$.</p>
<ul>
<li>If worried about negative prices, think of these as being logarithms of the actual price.</li>
</ul>
</li>
<li><p>Limit sell orders may be placed at any level greater than the best bid $B(t)$ at time $t$ and limit buy orders at any level less than the best offer $A(t)$.</p>
</li>
<li><p>In particular, just as in real markets, limit orders may be placed inside the spread (if the current spread is greater than one tick).</p>
</li>
<li><p>Market orders arrive randomly at rate $\mu$.</p>
</li>
<li><p>Limit orders (per price level) arrive at rate $\alpha$.</p>
</li>
<li><p>A proportion $\delta$ of existing limit orders is canceled.</p>
</li>
<li><p>All market orders and limit orders are for one share.</p>
</li>
<li><p>All the order flows are modeled as <strong>independent</strong> Poisson processes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Analysis-of-the-SFGK-order-book-model">Analysis of the SFGK order book model<a class="anchor-link" href="#Analysis-of-the-SFGK-order-book-model">¶</a></h2><ul>
<li><p>The SFGK model depends on so few parameters that, even though it is capable of generating complex behavior, it remains amenable to analytical investigation.</p>
</li>
<li><p>For example, it is easy to see that the asymptotic book depth far away from the best quote must be given by $\alpha/\delta$.</p>
</li>
</ul>
<p>The argument goes as follows:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Asymptotic-book-depth">Asymptotic book depth<a class="anchor-link" href="#Asymptotic-book-depth">¶</a></h2><ul>
<li><p>In the steady-state, orders arriving into the book must balance orders leaving the book.</p>
</li>
<li><p>Far away from the best quote, the probability of a limit order leaving the book as the result of an execution against a market order is very small.</p>
</li>
<li><p>Thus we need only consider new orders arriving balancing existing orders leaving due to cancelation.</p>
<ul>
<li>At a given price, for a fixed time interval $\Delta$, the expected number of orders arriving is $\alpha \Delta$ and the expected number of orders canceled is $\delta d\Delta $ where $d$ is the number of shares at the book at that price level.    </li>
<li>For these to balance, we must have $\alpha \Delta= \delta d\Delta$, or equivalently,
$$
d=\frac{\alpha}{\delta}.
$$</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Dimensional-Analysis">Dimensional Analysis<a class="anchor-link" href="#Dimensional-Analysis">¶</a></h1><p>A very useful analysis method in the microstructure is demensional analysis to guess the relationships between model outputs and parameters. In fact, this analysis method was first introduced by Joseph Fourier who argued that the physical quantities with the same kind and same dimension can be compared to each other. This I believe is the essence of dimensional analysis.</p>
<ul>
<li>The dimensions of the parameters of the SFGK model are as follows:</li>
</ul>
<table>
<thead><tr>
<th style="text-align:center">Parameter</th>
<th style="text-align:center">Dimensions</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$\mu$</td>
<td style="text-align:center">shares/T</td>
</tr>
<tr>
<td style="text-align:center">$\alpha$</td>
<td style="text-align:center">shares/(ticks T)</td>
</tr>
<tr>
<td style="text-align:center">$\delta$</td>
<td style="text-align:center">1/T</td>
</tr>
</tbody>
</table>
<ul>
<li>Remember that $\mu$ is the arrival rate of Market order, $\alpha$ the limit order arrival rate and $\delta$ the limit order cancelation rate </li>
<li>In the following we use these parameter dimensions to guess the functional form of relationships between measurable quantities of interest and the input parameters.</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Inverse-table">Inverse table<a class="anchor-link" href="#Inverse-table">¶</a></h2><ul>
<li><p>For convenience, we provide (unique) expressions for dimensions in terms of input parameters.</p>
</li>
<li><p>Inverting the previous table gives</p>
</li>
</ul>
<table>
<thead><tr>
<th style="text-align:center">Dimensions</th>
<th style="text-align:center">Parameter combinations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">shares</td>
<td style="text-align:center">$\mu$ / $\delta$</td>
</tr>
<tr>
<td style="text-align:center">T</td>
<td style="text-align:center">1 / $\delta$</td>
</tr>
<tr>
<td style="text-align:center">ticks</td>
<td style="text-align:center">$\mu$ / $\alpha$</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-spread---Diff-between-Best-Bid-and-Ask">The spread - Diff between Best Bid and Ask<a class="anchor-link" href="#The-spread---Diff-between-Best-Bid-and-Ask">¶</a></h2><ul>
<li><p>The spread has dimensions of $ticks$ and the only combination of parameters with these dimensions is $\mu/\alpha$.</p>
</li>
<li><p>Arguing more directly, inside the spread, limit orders are mostly removed by market orders.</p>
<ul>
<li><p>The total rate of arrival of limit orders is $2\,\alpha\,s$ where $s$ is the steady-state spread because as explained earlier, buy and sell orders may be placed at all levels at the spread or better.</p>
</li>
<li><p>The rate of removal of limit orders is just the rate of market orders $\mu$.</p>
</li>
</ul>
</li>
<li><p>We deduce that (roughly at least)
  $$
  s \sim \frac{\mu}{2\,\alpha}
  $$</p>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-slope-of-the-order-book">The slope of the order book<a class="anchor-link" href="#The-slope-of-the-order-book">¶</a></h2><p><h2><img align="center" src="http://d1p9cjl89wwo3v.cloudfront.net/wp-content/uploads/2013/09/figure11.png" width="650" /></h2></p>
<ul>
<li>Order book slope is a way of measuring the market liquidity. For example, see the graph above. New IT company has a less steeper order book slope, and thus a less market liquidity. Or put it the other way, when investors have drastical different view on a stock, their view would be reflected on the distribution dispersion of the  limit order. </li>
<li><p>This quantity has dimensions of $shares$ per $tick$ per $tick$ (the derivative with respect to ticks of the limit order density).</p>
</li>
<li><p>The only combination of parameters that has these dimensions is</p>
<p>$$
  \frac{\alpha^2}{\mu\,\delta}.
  $$</p>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Volatility">Volatility<a class="anchor-link" href="#Volatility">¶</a></h2><ul>
<li>The variance of the times series of trade prices generated in this model must have dimensions $ticks^2/T$.</li>
</ul>
<ul>
<li><p>Dimensional arguments imply that variance per unit time must therefore be proportional to</p>
<p>$$
  \frac{\mu^2\,\delta}{\alpha^2}
  $$</p>
</li>
</ul>
<ul>
<li><p>Thus volatility must scale as</p>
<p>$$
  \frac{\mu\,\sqrt{\delta}}{\alpha}
  $$</p>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Average-quote-size">Average quote size<a class="anchor-link" href="#Average-quote-size">¶</a></h2><ul>
<li><p>The average quote size $Q$ should be given roughly by the cumulative steady-state inventory $s/2$ ticks away from mid-market where $s$ is the average spread.</p>
</li>
<li><p>Thus</p>
<p>$$
  Q \sim s^2\,\frac{\alpha^2}{\mu\,\delta} \sim
  \frac{\mu^2}{\alpha^2}\,\frac{\alpha^2}{\mu\,\delta}=\frac{\mu}{\delta}
  $$</p>
<p>as we would expect because once again, ${\mu}/{\delta}$ is the only combination of parameters with dimensions of $shares$.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Market-impact">Market impact<a class="anchor-link" href="#Market-impact">¶</a></h2><p>The most familiar market impact model is $\sigma\,\sqrt{L}$ where $\sigma$ is volatility and the liquidity $L$ is fraction of average daily volume.  In this model, for a given number of shares $n$,</p>
<p>$$
L=\frac{n}{\mu}
$$</p>
<p>and as shown above</p>
<p>$$
\sigma \sim \frac{\mu\,\sqrt{\delta}}{\alpha}
$$</p>
<p>Re-expressing that model of market impact in terms of the parameters
of the SFGK model gives</p>
<p>$$
I(n) \sim
\frac{\mu\,\sqrt{\delta}}{\alpha}\,\sqrt{\frac{n}{\mu}}=\frac{1}{\alpha}\,\sqrt{{\mu\,\delta\,n}}
$$</p>
<p>which has the correct dimensions of $ticks$.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span>download.file<span class="p">(</span>url<span class="o">=</span><span class="s">"http://mfe.baruch.cuny.edu/wp-content/uploads/2015/01/ziSetup.zip"</span><span class="p">,</span> destfile<span class="o">=</span><span class="s">"ziSetup.zip"</span><span class="p">)</span>
unzip<span class="p">(</span>zipfile<span class="o">=</span><span class="s">"ziSetup.zip"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="kn">source</span><span class="p">(</span><span class="s">"ziSetup.R"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Initialize-the-book">Initialize the book<a class="anchor-link" href="#Initialize-the-book">¶</a></h1><p>First we have symmetric price level in the books. Then we set each event type to match the case we have discussed. Consider the price change in this way, every time price changing is like met with an external shock. Then the whole book would be different.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1">#Book setup</span>
L <span class="o"><-</span> <span class="m">30</span> <span class="c1">#Set number of price levels to be included in iterations</span>

<span class="c1"># Generate initial book</span>
LL <span class="o"><-</span> <span class="m">1000</span> <span class="c1">#Total number of levels in buy and sell books</span>

<span class="c1"># Initialize book with asymptotic depth of 5 shares</span>
initializeBook5 <span class="o"><-</span> <span class="kr">function</span><span class="p">()</span>
<span class="p">{</span>
  Price <span class="o"><<-</span> <span class="o">-</span>LL<span class="o">:</span>LL    
  <span class="c1"># Book shape is set to equal long-term average from simulation</span>
  buySize <span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="kp">rep</span><span class="p">(</span><span class="m">5</span><span class="p">,</span>LL<span class="m">-8</span><span class="p">),</span><span class="m">5</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="kp">rep</span><span class="p">(</span><span class="m">0</span><span class="p">,</span>LL<span class="m">+1</span><span class="p">))</span>
  sellSize <span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="kp">rep</span><span class="p">(</span><span class="m">0</span><span class="p">,</span>LL<span class="p">),</span><span class="m">0</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="kp">rep</span><span class="p">(</span><span class="m">5</span><span class="p">,</span>LL<span class="m">-8</span><span class="p">))</span>
  book <span class="o"><<-</span> <span class="kt">data.frame</span><span class="p">(</span>Price<span class="p">,</span> buySize<span class="p">,</span> sellSize <span class="p">)</span> 
  <span class="kr">if</span><span class="p">(</span>logging<span class="o">==</span><span class="bp">T</span><span class="p">){</span>eventLog <span class="o"><<-</span> <span class="kp">as.data.frame</span><span class="p">(</span><span class="kt">matrix</span><span class="p">(</span><span class="m">0</span><span class="p">,</span>nrow<span class="o">=</span>numEvents<span class="p">,</span>ncol<span class="o">=</span><span class="m">2</span><span class="p">))</span>
  <span class="kp">colnames</span><span class="p">(</span>eventLog<span class="p">)</span><span class="o"><<-</span><span class="kt">c</span><span class="p">(</span><span class="s">"Type"</span><span class="p">,</span><span class="s">"Price"</span><span class="p">)</span>
  count <span class="o"><<-</span> <span class="m">0</span>
  eventType <span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="s">"LB"</span><span class="p">,</span><span class="s">"LS"</span><span class="p">,</span><span class="s">"CB"</span><span class="p">,</span><span class="s">"CS"</span><span class="p">,</span><span class="s">"MB"</span><span class="p">,</span><span class="s">"MS"</span><span class="p">)</span>
  eventDescr <span class="o"><<-</span> <span class="kc">NA</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Find-the-mid-market">Find the mid market<a class="anchor-link" href="#Find-the-mid-market">¶</a></h1><p>if we want to know how price changes, we need to find the mid price, and naturally its position in the whole market. The following first two blocks does that.</p>
<p>Book shape is the center "band" part of the book.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1">#Various utility functions</span>
bestOffer <span class="o"><-</span> <span class="kr">function</span><span class="p">(){</span><span class="kp">min</span><span class="p">(</span>book<span class="o">$</span>Price<span class="p">[</span>book<span class="o">$</span>sellSize<span class="o">></span><span class="m">0</span><span class="p">])}</span>
bestBid <span class="o"><-</span> <span class="kr">function</span><span class="p">(){</span><span class="kp">max</span><span class="p">(</span>book<span class="o">$</span>Price<span class="p">[</span>book<span class="o">$</span>buySize<span class="o">></span><span class="m">0</span><span class="p">])}</span>
spread <span class="o"><-</span> <span class="kr">function</span><span class="p">(){</span>bestOffer<span class="p">()</span><span class="o">-</span>bestBid<span class="p">()}</span>
mid <span class="o"><-</span> <span class="kr">function</span><span class="p">(){(</span>bestOffer<span class="p">()</span><span class="o">+</span>bestBid<span class="p">())</span><span class="o">/</span><span class="m">2</span><span class="p">}</span>

<span class="c1">#Functions to find mid-market</span>
bidPosn<span class="o"><-</span><span class="kr">function</span><span class="p">()</span><span class="kp">length</span><span class="p">(</span>book<span class="o">$</span>buySize<span class="p">[</span>book<span class="o">$</span>Price<span class="o"><=</span>bestBid<span class="p">()])</span>
askPosn<span class="o"><-</span><span class="kr">function</span><span class="p">()</span><span class="kp">length</span><span class="p">(</span>book<span class="o">$</span>sellSize<span class="p">[</span>book<span class="o">$</span>Price<span class="o"><=</span>bestOffer<span class="p">()])</span>
midPosn<span class="o"><-</span><span class="kr">function</span><span class="p">(){</span><span class="kp">floor</span><span class="p">((</span>bidPosn<span class="p">()</span><span class="o">+</span>askPosn<span class="p">())</span><span class="o">/</span><span class="m">2</span><span class="p">)}</span>

<span class="c1">#Display center of book</span>
go <span class="o"><-</span> <span class="kr">function</span><span class="p">(){</span>book<span class="p">[(</span>midPosn<span class="p">()</span><span class="m">-20</span><span class="p">)</span><span class="o">:</span><span class="p">(</span>midPosn<span class="p">()</span><span class="m">+20</span><span class="p">),]}</span>

<span class="c1">#Display book shape</span>
bookShape<span class="o"><-</span><span class="kr">function</span><span class="p">(</span>band<span class="p">){</span><span class="kt">c</span><span class="p">(</span>book<span class="o">$</span>buySize<span class="p">[</span>midPosn<span class="p">()</span><span class="o">+</span><span class="p">(</span><span class="o">-</span>band<span class="o">:</span><span class="m">0</span><span class="p">)],</span>book<span class="o">$</span>sellSize<span class="p">[</span>midPosn<span class="p">()</span><span class="m">+1</span><span class="o">:</span>band<span class="p">])}</span>
bookPlot<span class="o"><-</span><span class="kr">function</span><span class="p">(</span>band<span class="p">){</span>
  plot<span class="p">((</span><span class="o">-</span>band<span class="o">:</span>band<span class="p">),</span>bookShape<span class="p">(</span>band<span class="p">),</span>
       col<span class="o">=</span><span class="s">"red"</span><span class="p">,</span>type<span class="o">=</span><span class="s">"l"</span><span class="p">,</span>xlab<span class="o">=</span><span class="s">"Price"</span><span class="p">,</span>ylab<span class="o">=</span><span class="s">"Quantity"</span><span class="p">)</span>
<span class="p">}</span>
<span class="c1"># book shape before events</span>
bookPlot<span class="p">(</span><span class="m">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA0gAAANICAMAAADKOT/pAAAAM1BMVEUAAABNTU1oaGh8fHyM
jIyampqnp6eysrK9vb3Hx8fQ0NDZ2dnh4eHp6enw8PD/AAD///89ODILAAAACXBIWXMAABJ0
AAASdAHeZh94AAAZ+klEQVR4nO3d60IiSRJA4SxARAXk/Z92LC42XgoYKzKu5/uxQ/fuTEWy
cUYEGtsBwGzNegAgA0ICBBASIICQAAGEBAggJEAAIQECCAkQQEiAAEICBBASIICQAAGEBAgg
JEAAIQECCAkQQEiAAEICBBASIICQAAGEBAggJEAAIQECCAkQQEiAAEICBBASIICQAAGEBAgg
JEAAIQECCAkQQEiAAEICBBASIICQAAGEBAggJEAAIQECCAkQQEiAAEICBBASIICQAAGEBAgg
JEAAIQECCAkQQEiAAEICBBASIICQAAGEBAggJEAAIQECCAkQQEiAAEICBBASIICQAAGEBAgg
JEAAIQECCAkQQEiAAEICBBASIICQAAGEBAggJEAAIQECCAkQQEiAAEICBBASIICQAAGEBAgg
JEAAIQECCAkQQEiAAEICBBASIICQAAGEBAggJEAAIQECCAkQQEiAAEICBBASIICQAAGEBAgg
JEAAIQECCAkQQEiAAIWQGhDMH7ZcPhyDSwCSCAkQQEiAAEICBBASIICQAAGEBAggJEAAIQEC
CAkQQEiAAEICBBASIICQAAGEBAggJEAAIQECCAkQoB/SZtHa6rXrJQBtiiGd/lj78vQn3Ndd
LgEY0Q5p3db7w2G3bpselwCMaIc0tP14e98WPS4BGNEO6fKxRT8/vuihzzZ6j+6P910W1nf/
bJMn0w7p6RLS0OMS7pUPyXqAblRDWj1vXtvLx839+vazDYSUVN7zq4b0+bCttWHf4xLu5V2k
x+Q9v+brSNvtZrNaHZ9yWN/sKG9IiTfpEYlPzzsbdCVepQckPj0h6Uq8Sg9IfHpC0pV4lR6Q
+PSEpCvxKj0g8ekJSVfiVXpA4tMTkq7Eq/SAxKcnJGWJd+muzGcnJGWZl+mezGcnJGWZl+me
zGcnJGWZl+mezGcnJGWZl+mezGcnJGWZl+mezGcnJGWZl+mezGcnJG2Zt+m21CcnJG2p1+mm
1CcnJG2p1+mm1CcnJG2p1+mm1CcnJG2p1+mm1CcnJG2p1+mm1CcnJG2p1+mm1CcnJHWp9+mG
3OcmJHW5F2pa7nMTkrrcCzUt97kJSV3uhZqW+9yEpC73Qk3LfW5CUpd7oablPjchqcu9UNNy
n5uQ1OVeqGm5z01I+nJv1JTkpyYkfclXakLyUxOSvuQrNSH5qQlJX/KVmpD81ISkL/lKTUh+
akLSl3ylJiQ/NSHpS75SE5KfmpAMJN+pX2U/MyEZyL5Uv8l+ZkIykH2pfpP9zIRkIPtS/Sb7
mQnJQPal+k32MxOSgexL9ZvsZyYkA9mX6jfZz0xIFrJv1U/pT0xIFtKv1Q/pT0xIFtKv1Q/p
T0xIFtKv1Q/pT0xIFtKv1Q/pT0xIFtKv1Q/pT0xIFtKv1Q/pT0xIJtLv1Tf5z0tIJvIv1lf5
z0tIJvIv1lf5z0tIJvIv1lf5z0tIJvIv1lf5z0tIJvIv1lf5z0tIJvIv1lf5z0tINvJv1rUC
pyUkGwVW60qB0xKSjQKrdaXAaQnJRoHVulLgtIRko8BqXSlwWkKyUWC1rhQ4LSHZKLBaVwqc
lpCMFNitTxXOSkhGKizXRYWzEpKRCst1UeGshGSkwnJdVDgrIRmpsFwXFc5KSEYqLNdFhbMS
kpEKy3VR4ayEZKXCdp2UOCkhWSmxXkclTkpIVkqs11GJkxKSlRLrdVTipIRkpcR6HZU4KSFZ
KbFeRyVOSkhWSqzXUYmTEpKZEvt1qHJOQjJTY8GqnJOQzNRYsCrnJCQzNRasyjkJyUyNBaty
TkIyU2PBqpyTkMzUWLAq5yQkMzUWrMo5CclOjQ2rcUpCMlRjxWqckpAM1VixGqckJEM1VqzG
KQnJUI0Vq3FKQjJUY8VqnJKQDNVYsRqnJCRLFXaswhlHhGSowpJVOOOIkAxVWLIKZxwRkqEK
S1bhjCNCMlRhySqccURIhiosWYUzjgjJUIUlq3DGESFZyr9l+U94RkiW8q9Z/hOeEZKl/GuW
/4RnhGQp/5rlP+EZIVnKv2b5T3hGSJbyr1n+E56ZhNTu/SMIKYv8JzwjJFPZ9yz7+f5RDKl9
1eMS4WRftOzn+0cxpLeBkL7LvmjZz/eP5kO7/aotd8d/wm//iIcry+T9O+uBZsp2nsfpfo/0
0trLge+RpkVfvOjz/53ykw27ZVvtCWlS9EWMPv/fqT9r99yGV0KaEn0Ro8//d/pPf28X978H
KhtS8E2MPf0sFq8jPRHSpNirGHv6WXiLkC+xVzH29LMQki+xVzH29LMQki+xVzH29LMQki+x
VzH29LMQki+xVzH29LMQkjORdzHy7HMRkjORlzHy7HMRkjORlzHy7HMRkjORlzHy7HMRkjOR
lzHy7HMRkjORlzHy7HMRkjORlzHy7HMRkjdxtzHu5AIIyZu46xh3cgGE5E3cdYw7uQBC8ibu
OsadXAAheRN3HeNOLoCQvIm7jnEnF0BI3sRdx7iTCyAkb+KuY9zJBRCSO1H3MercMgjJnagL
GXVuGYTkTtSFjDq3DEJyJ+pCRp1bBiG5E3Uho84tg5DcibqQUeeWQUjuRF3IqHPLICR/Ym5k
zKnFEJI/MVcy5tRiCMmfmCsZc2oxhORPzJWMObUYQvIn5krGnFoMIfkTcyVjTi2GkPyJuZIx
pxZDSA5F3MmIM0siJIciLmXEmSURkkMRlzLizJIIyaGISxlxZkmE5FDEpYw4syRCcijiUkac
WRIhORRxKSPOLImQPIq3lfEmFkZIHsVby3gTCyMkj+KtZbyJhRGSR/HWMt7EwgjJo3hrGW9i
YYTkUby1jDexMELyKN5axptYGCG5FG0vo80rj5BciraY0eaVR0guRVvMaPPKIySXoi1mtHnl
EZJL0RYz2rzyCMmlaIsZbV55hORStMWMNq88QnIp2mJGm1ceIfkUazNjTdsFIfkUazVjTdsF
IfkUazVjTdsFIfkUazVjTdsFIfkUazVjTdsFIfkUazVjTdsFIfkUazVjTdsFITkVaTcjzdoL
ITkVaTkjzdoLITkVaTkjzdoLITkVaTkjzdoLITkVaTkjzdoLITkVaTkjzdoLITkVaTkjzdoL
IXkVZzvjTNoRIXkVZz3jTNoRIXkVZz3jTNoRIXkVZz3jTNoRIXkVZz3jTNoRIXkVZz3jTNoR
IXkVZz3jTNoRIbkVZT+jzNkXIbkVZUGjzNkXIbkVZUGjzNkXIbkVZUGjzNkXIbkVZUGjzNkX
IbkVZUGjzNkXIbkVZUGjzNkXIfkVY0NjTNkdIfkVY0VjTNkdIfkVY0VjTNkdIfkVY0VjTNkd
IfkVY0VjTNkdIfkVY0VjTNkdIfkVY0VjTNkdIfkVY0VjTNkdITkWYUcjzKiBkByLsKQRZtRA
SI5FWNIIM2ogJMciLGmEGTUQkmMRljTCjBoIybEISxphRg2E5FiEJY0wowZC8sz/lvqfUAkh
eeZ/Tf1PqISQPPO/pv4nVEJInvlfU/8TKiEkz/yvqf8JlRCSZ/7X1P+ESgxC2gxtsel7iSz8
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" />
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1">#Choose from L whole numbers in (1,...,L) with uniform probability</span>
pick <span class="o"><-</span> <span class="kr">function</span><span class="p">(</span>m<span class="p">){</span><span class="kp">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span>m<span class="p">,</span><span class="m">1</span><span class="p">)}</span>

<span class="c1"># Switch logging on</span>
logging <span class="o"><-</span> <span class="bp">T</span>

<span class="c1">#Buy limit order</span>
limitBuyOrder <span class="o"><-</span> <span class="kr">function</span><span class="p">(</span>price<span class="o">=</span><span class="kc">NA</span><span class="p">){</span>
  <span class="kr">if</span> <span class="p">(</span><span class="kp">is.na</span><span class="p">(</span>price<span class="p">))</span>
  <span class="p">{</span>prx <span class="o"><<-</span> <span class="p">(</span>bestOffer<span class="p">()</span><span class="o">-</span>pick<span class="p">(</span>L<span class="p">))}</span>
  <span class="kr">else</span> prx <span class="o"><<-</span>price  
  <span class="kr">if</span><span class="p">(</span>logging<span class="o">==</span><span class="bp">T</span><span class="p">){</span>eventLog<span class="p">[</span>count<span class="p">,]</span><span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="s">"LB"</span><span class="p">,</span>prx<span class="p">)}</span> 
  book<span class="o">$</span>buySize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">==</span>prx<span class="p">]</span><span class="o"><<-</span>book<span class="o">$</span>buySize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">==</span>prx<span class="p">]</span><span class="m">+1</span><span class="p">}</span> 

<span class="c1">#Sell limit order</span>
limitSellOrder <span class="o"><-</span> <span class="kr">function</span><span class="p">(</span>price<span class="o">=</span><span class="kc">NA</span><span class="p">){</span>
  <span class="kr">if</span> <span class="p">(</span><span class="kp">is.na</span><span class="p">(</span>price<span class="p">))</span>
  <span class="p">{</span>prx <span class="o"><<-</span> <span class="p">(</span>bestBid<span class="p">()</span><span class="o">+</span>pick<span class="p">(</span>L<span class="p">))}</span>
  <span class="kr">else</span> prx <span class="o"><<-</span>price  
  <span class="kr">if</span><span class="p">(</span>logging<span class="o">==</span><span class="bp">T</span><span class="p">){</span>eventLog<span class="p">[</span>count<span class="p">,]</span> <span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="s">"LS"</span><span class="p">,</span>prx<span class="p">)}</span>  
  book<span class="o">$</span>sellSize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">==</span>prx<span class="p">]</span><span class="o"><<-</span>book<span class="o">$</span>sellSize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">==</span>prx<span class="p">]</span><span class="m">+1</span><span class="p">}</span> 

<span class="c1">#Cancel buy order            </span>
cancelBuyOrder<span class="o"><-</span><span class="kr">function</span><span class="p">(</span>price<span class="o">=</span><span class="kc">NA</span><span class="p">){</span>
  <span class="kp">q</span><span class="o"><-</span>pick<span class="p">(</span>nb<span class="p">)</span> 
  tmp <span class="o"><-</span> <span class="kp">cumsum</span><span class="p">(</span><span class="kp">rev</span><span class="p">(</span>book<span class="o">$</span>buySize<span class="p">))</span>  <span class="c1">#Cumulative buy size from 0</span>
  posn <span class="o"><-</span> <span class="kp">length</span><span class="p">(</span>tmp<span class="p">[</span>tmp<span class="o">>=</span><span class="kp">q</span><span class="p">])</span> <span class="c1">#gives position in list where cumulative size >q</span>
  prx <span class="o"><<-</span> book<span class="o">$</span>Price<span class="p">[</span>posn<span class="p">]</span> 
  <span class="kr">if</span> <span class="p">(</span><span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>price<span class="p">))</span> <span class="p">{</span>prx <span class="o"><<-</span>price<span class="p">}</span> 
  <span class="kr">if</span><span class="p">(</span>logging<span class="o">==</span><span class="bp">T</span><span class="p">){</span>eventLog<span class="p">[</span>count<span class="p">,]</span><span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="s">"CB"</span><span class="p">,</span>prx<span class="p">)}</span> 
  book<span class="o">$</span>buySize<span class="p">[</span>posn<span class="p">]</span><span class="o"><<-</span>book<span class="o">$</span>buySize<span class="p">[</span>posn<span class="p">]</span><span class="m">-1</span><span class="p">}</span>


<span class="c1">#Cancel sell order</span>
cancelSellOrder<span class="o"><-</span><span class="kr">function</span><span class="p">(</span>price<span class="o">=</span><span class="kc">NA</span><span class="p">){</span>
  <span class="kp">q</span><span class="o"><-</span>pick<span class="p">(</span>ns<span class="p">)</span> 
  tmp <span class="o"><-</span> <span class="kp">cumsum</span><span class="p">(</span>book<span class="o">$</span>sellSize<span class="p">)</span>  <span class="c1">#Cumulative sell size from 0</span>
  posn <span class="o"><-</span> <span class="kp">length</span><span class="p">(</span>tmp<span class="p">[</span>tmp<span class="o"><</span><span class="kp">q</span><span class="p">])</span><span class="m">+1</span> 
  prx <span class="o"><<-</span> book<span class="o">$</span>Price<span class="p">[</span>posn<span class="p">]</span> 
  <span class="kr">if</span> <span class="p">(</span><span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>price<span class="p">))</span> <span class="p">{</span>prx <span class="o"><<-</span>price<span class="p">}</span>  
  <span class="kr">if</span><span class="p">(</span>logging<span class="o">==</span><span class="bp">T</span><span class="p">){</span>eventLog<span class="p">[</span>count<span class="p">,]</span><span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="s">"CS"</span><span class="p">,</span>prx<span class="p">)}</span> 
  book<span class="o">$</span>sellSize<span class="p">[</span>posn<span class="p">]</span><span class="o"><<-</span>book<span class="o">$</span>sellSize<span class="p">[</span>posn<span class="p">]</span><span class="m">-1</span><span class="p">}</span>

<span class="c1">#Market buy order</span>
marketBuyOrder <span class="o"><-</span> <span class="kr">function</span><span class="p">(){</span>
  prx <span class="o"><<-</span> bestOffer<span class="p">()</span> 
  <span class="kr">if</span><span class="p">(</span>logging<span class="o">==</span><span class="bp">T</span><span class="p">){</span>eventLog<span class="p">[</span>count<span class="p">,]</span><span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="s">"MB"</span><span class="p">,</span>prx<span class="p">)}</span> 
  book<span class="o">$</span>sellSize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">==</span>prx<span class="p">]</span><span class="o"><<-</span>book<span class="o">$</span>sellSize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">==</span>prx<span class="p">]</span><span class="m">-1</span><span class="p">}</span>

<span class="c1">#Market sell order</span>
marketSellOrder <span class="o"><-</span> <span class="kr">function</span><span class="p">(){</span>
  prx <span class="o"><<-</span> bestBid<span class="p">()</span> 
  <span class="kr">if</span><span class="p">(</span>logging<span class="o">==</span><span class="bp">T</span><span class="p">){</span>eventLog<span class="p">[</span>count<span class="p">,]</span><span class="o"><<-</span> <span class="kt">c</span><span class="p">(</span><span class="s">"MS"</span><span class="p">,</span>prx<span class="p">)}</span> 
  book<span class="o">$</span>buySize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">==</span>prx<span class="p">]</span><span class="o"><<-</span>book<span class="o">$</span>buySize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">==</span>prx<span class="p">]</span><span class="m">-1</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Generate an event and update the buy and sell books</span>
<span class="c1">#Note that limit orders may be placed inside the spread</span>
generateEvent <span class="o"><-</span> <span class="kr">function</span><span class="p">()</span>
    <span class="p">{</span>
    nb <span class="o"><<-</span> <span class="kp">sum</span><span class="p">(</span>book<span class="o">$</span>buySize<span class="p">[</span>book<span class="o">$</span>Price<span class="o">>=</span><span class="p">(</span>bestOffer<span class="p">()</span><span class="o">-</span>L<span class="p">)]);</span> <span class="c1"># Number of cancelable buy orders</span>
    ns <span class="o"><<-</span> <span class="kp">sum</span><span class="p">(</span>book<span class="o">$</span>sellSize<span class="p">[</span>book<span class="o">$</span>Price<span class="o"><=</span><span class="p">(</span>bestBid<span class="p">()</span><span class="o">+</span>L<span class="p">)]);</span> <span class="c1"># Number of cancelable sell orders</span>
    eventRate <span class="o"><-</span> nb<span class="o">*</span>delta <span class="o">+</span> ns<span class="o">*</span>delta <span class="o">+</span> mu <span class="o">+</span> <span class="m">2</span><span class="o">*</span>L<span class="o">*</span>alpha<span class="p">;</span> 
    probEvent <span class="o"><-</span> <span class="kt">c</span><span class="p">(</span>L<span class="o">*</span>alpha<span class="p">,</span>L<span class="o">*</span>alpha<span class="p">,</span>nb<span class="o">*</span>delta<span class="p">,</span>ns<span class="o">*</span>delta<span class="p">,</span>mu<span class="o">/</span><span class="m">2</span><span class="p">,</span>mu<span class="o">/</span><span class="m">2</span><span class="p">)</span><span class="o">/</span>eventRate<span class="p">;</span>
    m <span class="o"><-</span> <span class="kp">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">6</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> replace <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> probEvent<span class="p">);</span> <span class="c1">#Choose event type</span>
    <span class="kr">switch</span><span class="p">(</span>m<span class="p">,</span>
    		limitBuyOrder<span class="p">(),</span>
    		limitSellOrder<span class="p">(),</span>
    		cancelBuyOrder<span class="p">(),</span>
    		cancelSellOrder<span class="p">(),</span>
    		marketBuyOrder<span class="p">(),</span>
    		marketSellOrder<span class="p">()</span>
    		<span class="p">);</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Figure 2: Average book shape (This take some time to run!)</span>

logging <span class="o"><-</span> <span class="bp">F</span> <span class="c1"># Very important for speed!</span>

alpha <span class="o"><-</span> <span class="m">1</span>
mu <span class="o"><-</span> <span class="m">10</span>
delta <span class="o"><-</span> <span class="m">1</span><span class="o">/</span><span class="m">5</span> 
initializeBook5<span class="p">()</span>
<span class="c1"># Burn in for 1000 events</span>
<span class="kr">for</span><span class="p">(</span>count <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="p">){</span>
  generateEvent<span class="p">()</span>
<span class="p">}</span>
numEvents <span class="o"><-</span> <span class="m">100000</span> <span class="c1"># Average over 100,000 events</span>
<span class="c1"># numEvents <- 10000 # Average over 10,000 events</span>
avgBookShape <span class="o"><-</span> bookShape<span class="p">(</span><span class="m">20</span><span class="p">)</span><span class="o">/</span>numEvents
<span class="kr">for</span><span class="p">(</span>count <span class="kr">in</span> <span class="m">2</span><span class="o">:</span>numEvents<span class="p">){</span>
  generateEvent<span class="p">()</span>
  avgBookShape <span class="o"><-</span> avgBookShape<span class="o">+</span>bookShape<span class="p">(</span><span class="m">20</span><span class="p">)</span><span class="o">/</span>numEvents
<span class="p">}</span>

plot<span class="p">(</span><span class="m">-20</span><span class="o">:</span><span class="m">20</span><span class="p">,</span>avgBookShape<span class="p">,</span>main<span class="o">=</span><span class="kc">NA</span><span class="p">,</span>xlab<span class="o">=</span><span class="s">"Relative price"</span><span class="p">,</span>ylab<span class="o">=</span><span class="s">"# Shares"</span><span class="p">,</span> col<span class="o">=</span><span class="s">"red"</span><span class="p">,</span> type<span class="o">=</span><span class="s">"b"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_png output_subarea ">
<img src="data:image/png;base64,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" />
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Average book shape over 100,000 events with $\alpha$ = 1, $\mu$ = 10, $\delta$ = 1/5. Note that asymptotic book depth is $\alpha/\delta$ = 5.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An direct thought is that, what if we only focus on the price change, instead of focusing on the price influence?</p>
<p>That would be what we will do in the following part. We suppose the current price is given, and we need to figure the probability of price up move.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Boundary-value-problem-for-probability-of-up-move">Boundary value problem for probability of up move<a class="anchor-link" href="#Boundary-value-problem-for-probability-of-up-move">¶</a></h2><p>Denote $\tau_a = \inf\{t \geq 0: q_a(t) = 0\}$ and  $\tau_b = \inf\{t \geq 0: q_b(t) = 0\}$. In other words, $\tau_a$ ($\tau_b$ respectively) is the first time that the ask (bid respectively) side of the book is depleted.</p>
<p>Let $u(x,y) = P\left[\tau_a \leq \tau_b|q_b = x, q_a = y \right]$. That is, $u$ is the probability that, conditioned on $q_b = x$ and $q_a = y$, the ask side is depleted before the bid side. Consequently, $u$ is the probability that the price moves up.</p>
<p>Then $u$ satisfies the parital difference equation</p>
<p>$$
\mathcal{L} u(x,y) = 0 \quad \Longleftrightarrow \quad u(x+h,y) + u(x,y+h) + u(x-h,y) + u(x,y-h) - 4 u(x,y) = 0, \quad \forall x, y > 0
$$</p>
<p>with boundary conditions</p>
<p>$$
u(x,0) = 1, \; \forall x \geq 0 \quad \mbox{and} \quad u(0,y) = 0, \; \forall y \geq 0.
$$</p>
<p>The solution is given by $\phi$.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="A-heuristic-asymptotic-analysis">A heuristic asymptotic analysis<a class="anchor-link" href="#A-heuristic-asymptotic-analysis">¶</a></h2><p>Recall the difference equation for $u$</p>
<p>$$
u(x+h,y) + u(x,y+h) + u(x-h,y) + u(x,y-h) - 4 u(x,y) = 0.
$$</p>
<p>Rewrite the last equation as</p>
<p>$$
\frac1{h^2} \left[u(x+h,y) + u(x-h,y) - 2 u(x,y) \right] + \frac1{h^2} \left[u(x,y+h) + u(x,y-h) - 2 u(x,y)\right] = 0.
$$</p>
<p>In the limit, as $h \to 0$, the difference equation converges to the Laplace equation</p>
<p><a name="eq:laplacian"></a>(1)
$$
\Delta u = u_{xx} + u_{yy} = 0 
$$</p>
<p>with boundary condition $u(x,0) = 1$ and $u(0,y) = 0$.</p>
<p>Hence, for small $h$, we would expect the solution from PDE is approximately equal to the solution from difference equation.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Solving-Laplace-equation">Solving Laplace equation<a class="anchor-link" href="#Solving-Laplace-equation">¶</a></h2><p>Rewriting <a href="#eq:laplacian">(1)</a> in polar coordinates $(r,\theta)$ gives</p>
<p>$$
\Delta u(x,y) =  \frac{\partial^2 u}{\partial r^2}+\frac 1 r \,\frac{\partial u}{\partial r}+ \frac 1 {r^2}\frac{\partial^2 u}{\partial \theta^2}.
$$</p>
<p>Radial symmetry gives $\partial_r u = 0$ so this equation simplifies to</p>
<p>$$
\frac{\partial^2 u}{\partial \theta^2} = 0.
$$</p>
<p>with solution</p>
<p>$$
u(r,\theta)= a \, \theta+ b.
$$</p>
<p>Applying the boundary conditions, $u(r,\pi/2)=0$ and $u(r,0) = 1$ gives</p>
<p>$$
u(x,y)= u(r,\theta) = 1-\frac 2 \pi \,\theta = 1-\frac 2 \pi \,\arctan \frac{y}{x}=\frac 2 \pi \,\arctan \frac x y.
$$</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Microprice">Microprice<a class="anchor-link" href="#Microprice">¶</a></h2><p>Now that we have the probability of an up-tick, we may define a quantity which we may consider as an estimate of the efficient price.</p>
<p>Denote the spread by $s$ and the mid-price by $M_t=(B_t+A_t)/2$.  Then we may define the  <span>* microprice*</span> $S_t$   as</p>
<p><a name="eq:microprice"></a>(2)
\begin{eqnarray}
S_t &=& \mbox{mid-price} + \mbox{half spread} \times \mbox{expected price move} \\
&=& M_t + \frac s 2 \, \left\{2\,\phi(q_b,q_a)-1\right\}\nonumber\\
&\approx&M;_t + \frac s 2 \,\left\{\frac 4\pi \,\arctan \frac {q_b} {q_a}-1\right\}.
\end{eqnarray}</p>
<ul>
<li><p>If $q_b \ll q_a$, $S_t \approx M_t- s/2 = B_t$.</p>
</li>
<li><p>If $q_b \gg q_a$, $S_t \approx M_t+ s/2 = A_t$.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Order-book-imbalance">Order book imbalance<a class="anchor-link" href="#Order-book-imbalance">¶</a></h2><p>[Lipton, Pesavento and Sotiropoulos]<sup class="reference" id="cite_ref-LPS"><a href="#cite_note-LPS"><span>[</span>6<span>]</span></a></sup> define the <em>order book imbalance</em></p>
<p>$$
I = \frac{ q_b-q_a}{q_b+q_a}.
$$</p>
<p>In terms of $I$,  the microprice <a href="#eq:microprice">(2)</a> becomes</p>
<p>\begin{eqnarray}
S_t &\approx&M;_t + \frac s 2 \,\left\{\frac 4\pi \,\arctan \frac {q_b} {q_a}-1\right\}\\
&=&M;_t + \frac s 2 \,\frac 4\pi \,\arctan \frac{ q_b-q_a}{q_b+q_a}\\
&=&M;_t + \frac s 2 \,\frac 4\pi \,\arctan I.
\end{eqnarray}</p>
<ul>
<li><p>We see that book imbalance seems to be the right variable in the sense that $S_t$ is linear in $I$ for small $I$.</p>
<ul>
<li>Moreover, $I$ is anti-symmetric in $q_b$ and $q_a$.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Graph-of-microprice-vs-order-book-imbalance">Graph of microprice vs order book imbalance<a class="anchor-link" href="#Graph-of-microprice-vs-order-book-imbalance">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [30]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Figure 6: Microprice vs order book imbalance </span>
mPrice <span class="o"><-</span> <span class="kr">function</span><span class="p">(</span>imbalance<span class="p">){</span><span class="m">4</span><span class="o">/</span><span class="kc">pi</span><span class="o">*</span><span class="kp">atan</span><span class="p">(</span>imbalance<span class="p">)}</span>
curve<span class="p">(</span>mPrice<span class="p">(</span>x<span class="p">),</span>from<span class="o">=</span><span class="m">-1</span><span class="p">,</span>to<span class="o">=</span><span class="m">1</span><span class="p">,</span>col<span class="o">=</span><span class="s">"red"</span><span class="p">,</span>xlab<span class="o">=</span><span class="s">"Imbalance (I)"</span><span class="p">,</span>ylab<span class="o">=</span><span class="s">"Microprice/Half-spread"</span><span class="p">)</span>
abline<span class="p">(</span>h<span class="o">=</span><span class="m">0</span><span class="p">,</span>lty<span class="o">=</span><span class="m">2</span><span class="p">)</span>
abline<span class="p">(</span>v<span class="o">=</span><span class="m">0</span><span class="p">,</span>lty<span class="o">=</span><span class="m">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
Lbb+Arc4twAAAABJRU5ErkJggg==" />
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="References">References<a class="anchor-link" href="#References">¶</a></h3><ol>
<li id="cite_note-AbergelJedidi"><span class="mw-cite-backlink"><b><a href="#cite_ref-AbergelJedidi">^</a></b></span> Frédéric Abergel and Aymen Jedidi, A Mathematical Approach to Order Book Modeling, <span>* International Journal of Theoretical and Applied Finance*</span>, <span>**16**(5)</span> 1350025-1350040 (2013).</li>
<li id="cite_note-BouchaudFarmerLillo"><span class="mw-cite-backlink"><b><a href="#cite_ref-BouchaudFarmerLillo">^</a></b></span>   Jean-Philippe Bouchaud, J. Doyne Farmer, and Fabrizio Lillo, How Markets Slowly Digest Changes in Supply and Demand, in <span>* Handbook of Financial Markets: Dynamics and Evolution*</span> 57-156. (2009) available at http://tuvalu.santafe.edu/%7Ejdf/papers/MarketsSlowlyDigest.pdf: Sections 2.2 and 2.9.3.</li>
<li id="cite_note-ContLarrard"><span class="mw-cite-backlink"><b><a href="#cite_ref-ContLarrard">^</a></b></span>   Rama Cont and Adrien de Larrard, Price dynamics in a Markovian limit order market, <span>* SIAM J. Finan. Math.*</span>,  <span>** 4**</span>(1) 1-25 (2013).</li>
<li id="cite_note-ContLarrard2"><span class="mw-cite-backlink"><b><a href="#cite_ref-ContLarrard2">^</a></b></span>   Rama Cont and Adrien de Larrard, Order book dynamics in liquid markets: limit theorems and diffusion approximations, <span>* SSRN*</span>, (2011).</li>
<li id="cite_note-ContStoikovTalreja"><span class="mw-cite-backlink"><b><a href="#cite_ref-ContStoikovTalreja">^</a></b></span>   Rama Cont, Sasha Stoikov and Rishi Talreja, A stochastic model for order book dynamics,
<span>* Operations Research*</span>,  <span>**58**</span> 549-563 (2010).</li>
<li id="cite_note-LPS"><span class="mw-cite-backlink"><b><a href="#cite_ref-LPS">^</a></b></span>   Alexander Lipton, Umberto Pesavento, and Michael G Sotiropoulos, Trade arrival dynamics and quote imbalance in a limit order book, <span>* arXiv*</span> (2013).</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</div>

<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

								</article>
						</div>
					</div>
				</div>
			</section>
	</div>
</div>

				</div>
			</div>

		<!-- Footer Wrapper -->
			<div id="footer-wrapper">
				<!-- Footer -->
					<section id="footer" class="container">
						<div class="row">
							<div class="8u">
								<section>
									<header>
										<h2>Latest articles</h2>
									</header>
									<ul class="dates">
										<li>
											<span class="date">Jan <strong>12</strong></span>
											<h3><a href="welcome.html">Welcome</a></h3>
											<p>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Welcome-to-my-blog">Welcome to my blog<a class="anchor-link" href="#Welcome-to-my-blog">¶</a></h1><p>I would like to share with you how I think and find about the economic world with logic, statistics and to a certain degree, art.</p></p>
										</li>
										<li>
											<span class="date">Jan <strong>01</strong></span>
											<h3><a href="data mining.html">Diabetes Mining</a></h3>
											<p>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Project-Goal">Project Goal<a class="anchor-link" href="#Project-Goal">¶</a></h1><p>Nowadays there are one seventh grown-ups in the United States who have diabetes. However, this number would go larger till 2050 to one third. From the database of diabete of UCL, I hope at least we could learn about diabete based on a data analytics perspective.</p></p>
										</li>
										<li>
											<span class="date">Dec <strong>01</strong></span>
											<h3><a href="microstructure2.html">Stochastic Process</a></h3>
											<p>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Thoughts-on-Stochastic-Process">Thoughts on Stochastic Process<a class="anchor-link" href="#Thoughts-on-Stochastic-Process">¶</a></h1><p>$$
\newcommand{\bea}{\begin{eqnarray}}
\newcommand{\eea}{\end{eqnarray}}
\newcommand{\supp}{\mathrm{supp}}
\newcommand{\F}{\mathcal{F} }
\newcommand{\cF}{\mathcal{F} }
\newcommand{\E}{\mathbb{E} }
\newcommand{\Eof}[1]{\mathbb{E}\left[ #1 \right]}
\def\Cov{{ \mbox{Cov} }}
\def\Var{{ \mbox{Var} }}
\newcommand{\1}{\mathbf{1} }
\newcommand{\p}{\partial}
\newcommand{\P}{\mathbb{P} }
\newcommand{\PP}{\mathbb{P} }
\newcommand{\Pof}[1]{\mathbb{P}\left[ #1 \right]}
\newcommand{\QQ}{\mathbb{Q} }
\newcommand{\R}{\mathbb{R} }
\newcommand{\DD}{\mathbb{D} }
\newcommand{\HH}{\mathbb{H} }
\newcommand{\spn}{\mathrm{span} }
\newcommand{\cov}{\mathrm{cov} }
\newcommand{\HS}{\mathcal{L}_{\mathrm{HS}} }
\newcommand{\Hess}{\mathrm{Hess} }
\newcommand{\trace}{\mathrm{trace} }
\newcommand{\LL}{\mathcal{L} }
\newcommand{\s}{\mathcal{S} }
\newcommand{\ee}{\mathcal{E} }
\newcommand{\ff}{\mathcal{F} }
\newcommand{\hh}{\mathcal{H} }
\newcommand{\bb}{\mathcal{B} }
\newcommand{\dd}{\mathcal{D} }
\newcommand{\g}{\mathcal{G} }
\newcommand{\half}{\frac{1}{2} }
\newcommand{\T}{\mathcal{T} }
\newcommand{\bit}{\begin{itemize}}
\newcommand{\eit}{\end{itemize}}
\newcommand{\beq}{\begin{equation}}
\newcommand{\eeq}{\end{equation}}
\newcommand{\tr}{\mbox{tr}}
$$</p></p>
										</li>
										<li>
											<span class="date">Nov <strong>30</strong></span>
											<h3><a href="microstructure.html">SFGK model</a></h3>
											<p>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-SFGK-zero-intelligence-model">The SFGK zero-intelligence model<a class="anchor-link" href="#The-SFGK-zero-intelligence-model">¶</a></h2><p>In this model due to Smith, Farmer, Gillemot and Krishnamurthy:</p></p>
										</li>
									</ul>
								</section>
							</div>
								<div class="4u">
									<section>
										<header>
											<h2>What's this all about?</h2>
										</header>
											<img src="/images/timg (1).jpg" class="image image-full" alt="" />
										<p>
										How to use economics, data and art to change the world. 

The future is coming and I am ready
										</p>
										<footer>
										</footer>
									</section>
								</div>
						</div>
						<div class="row">
							<div class="4u">
								<section>
									<header>
										<h2>Blogroll</h2>
									</header>
									<ul class="divided">
											<li><a href="http://getpelican.com/">Pelican</a></li>
											<li><a href="http://python.org/">Python.org</a></li>
											<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
											<li><a href="https://github.com">Github</a></li>
									</ul>
								</section>
							</div>
							<div class="4u">
								<section>
									<header>
										<h2>Categories</h2>
									</header>
									<ul class="divided">
											<li><a href="/category/posts.html">Posts</a></li>
											<li><a href="/category/project.html">Project</a></li>
									</ul>
								</section>
							</div>
							<div class="4u">
							
								<section>
									<header>
										<h2>Contact</h2>
									</header>
									<ul class="social">
									</ul>
									<ul class="contact">
											<li>
												<h3>Mail</h3>
												<p><a href="mailto:Victordongy@163.com">Victordongy@163.com</a></p>
											</li>
									</ul>
								</section>
							</div>
						</div>
					</section>
			</div>
		<script src="/theme/js/jquery.min.js"></script>
		<script src="/theme/js/jquery.dropotron.js"></script>
		<script src="/theme/js/config.js"></script>
		<script src="/theme/js/skel.min.js"></script>
		<script src="/theme/js/skel-panels.min.js"></script>
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><link rel="stylesheet" href="/theme/css/ie8.css" /><![endif]-->
	</body>
</html>